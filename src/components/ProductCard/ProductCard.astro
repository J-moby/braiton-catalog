---
import { Icon } from "astro-icon/components";
import CustomImage from "@components/CustomImage/CustomImage";

interface Price {
  old: string;
  new: string;
}

interface Availability {
  moscow: number;
  orenburg: number;
  saintPetersburg: number;
}

interface Props {
  name: string;
  price: Price[];
  image: string;
  availability: Availability[];
}

const { name, price, image, availability } = Astro.props;
---

<div class="product-card">
  <div class="product-card__visual">
    <CustomImage
      image={{
        desktop: image,
      }}
      altText="Изображение товара"
      className="product-card__img"
    />
    <div class="product-card__more">
      <a href="#" class="product-card__link btn btn--icon">
        <span class="btn__text">В корзину</span>
        <Icon name="icon-basket" aria-hidden="true" width="24" height="24" />
      </a>
      <a href="#" class="product-card__link btn btn--secondary">
        <span class="btn__text">Подробнее</span>
      </a>
    </div>
  </div>
  <div class="product-card__info">
    <h2 class="product-card__title">{name}</h2>
    <span class="product-card__old">
      <span class="product-card__old-number">{price.old}</span>
      <span class="product-card__old-add">₽</span>
    </span>
    <span class="product-card__price">
      <span class="product-card__price-number">{price.new}</span>
      <span class="product-card__price-add">₽</span>
    </span>
    <div class="product-card__tooltip tooltip">
      <button class="tooltip__btn" aria-label="Показать подсказку">
        <Icon
          class="tooltip__icon"
          name="icon-i"
          aria-hidden="true"
          width="5"
          height="10"
        />
      </button>
      <div class="tooltip__content">
        <span class="tooltip__text">Наличие товара по городам:</span>
        <ul class="tooltip__list">
          <li class="tooltip__item">
            <span class="tooltip__text">Москва: <span class="tooltip__count">{availability.moscow}</span></span>
          </li>
          <li class="tooltip__item">
            <span class="tooltip__text">Оренбург: <span class="tooltip__count">{availability.orenburg}</span></span>
          </li>
          <li class="tooltip__item">
            <span class="tooltip__text">Санкт-Петербург: <span class="tooltip__count">{availability.saintPetersburg}</span></span>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
